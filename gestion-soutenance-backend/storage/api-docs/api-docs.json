{
    "openapi": "3.0.0",
    "info": {
        "title": "API Gestion des Soutenances",
        "description": "Documentation OpenAPI pour le backend Laravel",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Serveur local"
        }
    ],
    "paths": {
        "/api/auth/professeur/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Connexion professeur",
                "operationId": "5c060268c7ada069362ce915778226f6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token et profil"
                    },
                    "401": {
                        "description": "Identifiants invalides"
                    }
                }
            }
        },
        "/api/auth/admin/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Connexion administrateur",
                "operationId": "574417459337e78a0e6bec1a1dfe23a6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token et profil"
                    },
                    "401": {
                        "description": "Identifiants invalides"
                    }
                }
            }
        },
        "/api/etudiants/{etudiant}/rapports": {
            "get": {
                "tags": [
                    "Rapports"
                ],
                "summary": "Lister les rapports d'un étudiant",
                "operationId": "2d4c92b838a7c9aac0b5fab03389d10a",
                "parameters": [
                    {
                        "name": "etudiant",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des rapports"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Rapports"
                ],
                "summary": "Dépôt de rapport par étudiant",
                "operationId": "cb9062e939a8e3cb86bdb1a2f7afa71f",
                "parameters": [
                    {
                        "name": "etudiant",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "titre",
                                    "date_depot"
                                ],
                                "properties": {
                                    "titre": {
                                        "type": "string"
                                    },
                                    "date_depot": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "commentaire": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Rapport créé"
                    },
                    "400": {
                        "description": "Validation échouée"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/etudiants/{etudiant}/soutenance": {
            "get": {
                "tags": [
                    "Soutenances"
                ],
                "summary": "Afficher la soutenance d'un étudiant",
                "operationId": "4e9c98de804cc320cd99d191f5223d4e",
                "parameters": [
                    {
                        "name": "etudiant",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de la soutenance"
                    },
                    "404": {
                        "description": "Aucune soutenance"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/juries": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Lister les juries",
                "operationId": "742f25f4fe4d930e29cc345de477347e",
                "responses": {
                    "200": {
                        "description": "Liste des juries"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Créer un jury",
                "operationId": "a82970fa5418f991fc2b0e697cf4cdf6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "president_id",
                                    "rapporteur_id",
                                    "encadrant_id",
                                    "examinateur_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Jury créé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/juries/{jury}": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Afficher un jury",
                "operationId": "4ee0db45f0de80ffeef22398fb654d7e",
                "parameters": [
                    {
                        "name": "jury",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails du jury"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mettre à jour un jury",
                "operationId": "6eade27ab0d6a937d07b83fb5d86ef63",
                "parameters": [
                    {
                        "name": "jury",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Supprimer un jury",
                "operationId": "ba624e52e82d529369f939cb85fce50e",
                "parameters": [
                    {
                        "name": "jury",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Supprimé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/juries/{jury}/annuler": {
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Annuler (supprimer) un jury",
                "operationId": "fc6b29d748795494d13f8dce2922c791",
                "parameters": [
                    {
                        "name": "jury",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Annulé"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/professeurs/{professeur}/rapports": {
            "get": {
                "tags": [
                    "Rapports"
                ],
                "summary": "Lister les rapports des étudiants assignés (encadrant ou rapporteur)",
                "operationId": "4582b2a5de7d8fce29925a058ca522e0",
                "parameters": [
                    {
                        "name": "professeur",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des rapports"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/professeurs/{professeur}/soutenances": {
            "get": {
                "tags": [
                    "Soutenances"
                ],
                "summary": "Lister les soutenances où le professeur est membre du jury",
                "operationId": "668b42ce9155b1d27a62316f3a89aac7",
                "parameters": [
                    {
                        "name": "professeur",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des soutenances"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/rapports/{rapport}/remarques": {
            "get": {
                "tags": [
                    "Remarques"
                ],
                "summary": "Lister les remarques d'un rapport",
                "operationId": "c01bb2d432ca27b16b1b280f67ba3c03",
                "parameters": [
                    {
                        "name": "rapport",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des remarques"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Remarques"
                ],
                "summary": "Ajouter une remarque sur un rapport",
                "operationId": "0e71d10818c2da41f78f3259acf7b910",
                "parameters": [
                    {
                        "name": "rapport",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "contenu"
                                ],
                                "properties": {
                                    "contenu": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Remarque créée"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/soutenances": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Lister les soutenances (filtres + pagination)",
                "operationId": "633dad0d19aa2bae61af959c5f87364b",
                "parameters": [
                    {
                        "name": "date",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "salle",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "jury_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "etudiant_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des soutenances"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Planifier une soutenance",
                "operationId": "f1c43100c52b779df850cb757bb56d18",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "date",
                                    "heure",
                                    "salle",
                                    "etudiant_id"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Soutenance créée"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/soutenances/{soutenance}": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Afficher une soutenance",
                "operationId": "cdadd25a293941cc8fb36684d246bc47",
                "parameters": [
                    {
                        "name": "soutenance",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Détails de la soutenance"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mettre à jour une soutenance",
                "operationId": "a0694f3f508d04e1fdc8cb136de39928",
                "parameters": [
                    {
                        "name": "soutenance",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Annuler une soutenance",
                "operationId": "8ed5d102440291b1ea86f177230df544",
                "parameters": [
                    {
                        "name": "soutenance",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Annulée"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/soutenances/{soutenance}/note": {
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Mettre à jour la note finale",
                "operationId": "95d4e3e32e14bd6e61c1c59f91b90529",
                "parameters": [
                    {
                        "name": "soutenance",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "note_finale"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/admin/soutenances/{soutenance}/annuler": {
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Annuler une soutenance (alias)",
                "operationId": "1837fbfec45cfab7e8bf132e4aab741b",
                "parameters": [
                    {
                        "name": "soutenance",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Annulée"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/status": {
            "get": {
                "tags": [
                    "Status"
                ],
                "summary": "Vérifier le statut de l'API",
                "description": "Vérifie que le serveur est en ligne et que la connexion à la base de données est établie",
                "operationId": "8b3905eed10f76484591adcdf2592d3d",
                "responses": {
                    "200": {
                        "description": "API et base de données fonctionnent correctement",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "API is running properly"
                                        },
                                        "server": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "database": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "database_name": {
                                            "type": "string",
                                            "example": "gestion_sout"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "example": "2025-12-03 12:30:45"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur de connexion à la base de données",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Database connection failed"
                                        },
                                        "server": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "database": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "description": "Saisir uniquement le jeton d'accès",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Auth",
            "description": "Auth"
        },
        {
            "name": "Rapports",
            "description": "Rapports"
        },
        {
            "name": "Soutenances",
            "description": "Soutenances"
        },
        {
            "name": "Admin",
            "description": "Admin"
        },
        {
            "name": "Remarques",
            "description": "Remarques"
        },
        {
            "name": "Status",
            "description": "Status"
        }
    ]
}